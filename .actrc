# Act configuration file

# NB! they don't include node 20 -> newer Github actions wont work in Act!
# -P ubuntu-latest=catthehacker/ubuntu:act-latest
# -P ubuntu-22.04=catthehacker/ubuntu:act-22.04

# The Actions-OSS project now ships runner images “for act” under the actions-oss org, meant to supersede the old personal namespace and keep up with platform shifts.
# There’s an active migration to these images specifically to modernize the stack for act; they’re maintained with current toolchains.
# NB! Even thes don't include node 20 -> newer Github actions wont work in Act!
 -P ubuntu-latest=ghcr.io/actions-oss/ubuntu:act-latest
 -P ubuntu-22.04==ghcr.io/actions-oss/ubuntu:act-22.04

# Both of these full images are Enormous, dont use! (≈ 20 GB compressed, ~60 GB unpacked !!!
# -P ubuntu-latest=catthehacker/ubuntu:full-latest
# -P ubuntu-latest=ghcr.io/actions-oss/act-full:ubuntu-22.04

# Auto-cleanup containers and volumes after each run to prevent accumulation
--rm

--actor=nektos/act

--container-options "--volume=${HOME}/.cache/uv:/uv-cache"
--env UV_CACHE_DIR=/uv-cache

# Because the workspace lives in the container’s filesystem and the cache is a mounted volume, uv can’t hardlink.
# To silence the warning:
--env UV_LINK_MODE=copy

# make the cache persistent and visible to act across runs
#--cache-server-path=~/.cache/act/caches
#--action-cache-path=~/.cache/act/actions
# Tell Act to reuse downloaded actions
#--action-offline-mode
